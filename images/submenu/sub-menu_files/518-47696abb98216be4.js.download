"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[518],{50518:function(e,t,n){n.d(t,{L:function(){return b}});var i=n(26042),r=n(69396),a=n(67294),o=n(14924),u=n(99534),l=n(828),s=n(29815),f=n(87146),d=n(73286),c=n(55346);var v=n(57258),g=n(34351),p=n(36866),Z=n(69658);function m(e){var t=e.array,n=void 0===t?[]:t,i=e.index,r=e.item;return(0,d.isArray)(n)?(0,s.Z)(n.map((function(e,t){return i===t?r:e}))):[]}var h=n(25408),O=n(11163),P={},y={items:P,pages:P,data:{},fetched:!1};function S(e){var t=e.apiMethod,n=e.apiData,u=e.queryParams,f=e.disabled,S=void 0!==f&&f,M=e.onSuccess,I=e.onError,E=e.itemsKey,R=void 0===E?"products":E,w=e.isPagination,x=void 0!==w&&w,K=e.ssrData,k=e.notHandledByUseSSR,b=void 0!==k&&k,q=e.onPageChange,D=(0,O.useRouter)(),F=(0,a.useRef)(null),T=(0,a.useRef)(!1),A=(0,a.useState)(u.page||1),Q=A[0],H=A[1],N=(0,a.useState)(C({oldData:y,newPage:K,itemsKey:R})),V=N[0],j=N[1];(0,a.useEffect)((function(){(null===u||void 0===u?void 0:u.page)&&Q!==u.page&&H(null===u||void 0===u?void 0:u.page)}),[null===u||void 0===u?void 0:u.page]);var U=(0,a.useMemo)((function(){var e=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).pager;if(!((0,c.k)(e)||+e.pagerCurrentPage<1||+e.pagerCurrentPage>=+e.pagerTotalPages))return e.pagerCurrentPage+1}(V.data),t=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).pager;if(!((0,c.k)(e)||+e.pagerCurrentPage<2||+e.pagerCurrentPage>=+e.pagerTotalPages))return e.pagerCurrentPage-1}(V.data);return{nextPageParam:e,hasNextPage:!!e,previousPageParam:t,hasPreviousPage:!!t}}),[V.data]),B=U.nextPageParam,L=U.hasNextPage,X=U.previousPageParam,_=U.hasPreviousPage,Y=(0,a.useMemo)((function(){return(0,i.Z)({},(0,d.cleanObject)((0,i.Z)({},n||{},u||{})))}),[n,u]),z=(0,a.useRef)(Y),G=(0,a.useMemo)((function(){return(0,r.Z)((0,i.Z)({},Y),(0,o.Z)({},g.tn,u.page||Q))}),[Y,Q]),W=(0,a.useRef)(!1),$=(0,a.useRef)(b),J=(0,a.useRef)(Y),ee=S||!b&&(T.current||!$.current||(0,h.X)(Y,J.current)&&1===Q),te=x||1===Q||W.current||u.page,ne=function(e){if(e&&(0,d.isEmpty)(e))j((function(e){return(0,r.Z)((0,i.Z)({},e),{fetched:!0,items:te?[]:e.items})}));else{var t=function(e){var t=e.newPage,n=e.reset,a=C({oldData:(0,r.Z)((0,i.Z)({},V),{items:te||n?P:V.items}),newPage:t,itemsKey:R});return j(a),a}({newPage:e});z.current=Y,W.current=!1,T.current=!1,null===M||void 0===M||M(e,t)}},ie=(0,v.V)({apiMethod:t,apiData:G,onSuccess:ne,onError:I,disabled:ee}),re=ie.pending,ae=ie.hasError,oe=ie.reload;(0,a.useEffect)((function(){(0,c.k)(K)||b||$.current||(ne(K),$.current=!0,J.current=(0,i.Z)({},Y))}),[K]),(0,a.useEffect)((function(){var e=function(e){var t=new URL(e,window.location.href).pathname;T.current=!(0,h.X)(F.current,t),F.current=t};return D.events.on("routeChangeStart",e),function(){D.events.off("routeChangeStart",e)}}),[]),(0,a.useEffect)((function(){le({page:(null===u||void 0===u?void 0:u.page)||1})}),[D.asPath]),(0,a.useEffect)((function(){ee&&!b&&($.current||(0,h.X)(J.current,Y))?ne(K):W.current=!(0,h.X)(Y,z.current)}),[Y]);var ue=function(e){(0,d.isNumber)(e)&&H(e)},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.page,n=void 0===t?1:t,a=e.updatePageParam,o=void 0!==a&&a;j((0,r.Z)((0,i.Z)({},V),{fetched:!1,items:[]})),o?null===q||void 0===q||q(n):Q===n?oe():ue(n)},se=(re||!V.fetched||W.current)&&!ae;return(0,r.Z)((0,i.Z)({},V),{items:te&&se?P:V.items,hasError:ae,pending:se,hasPreviousPage:_,hasNextPage:L,fetchNextPage:function(){L&&H(B)},fetchPreviousPage:function(){_&&H(X)},fetchPage:ue,addItem:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];j((function(e){var n=(0,i.Z)({},(null===e||void 0===e?void 0:e.items)||{});return t.forEach((function(e){var t=e.page,i=e.index,r=e.item;n[t]=(0,p.Q)({array:n[t],index:i,item:r})})),(0,r.Z)((0,i.Z)({},e),{items:n})}))},removeItem:function(e){var t=e.itemIndex;j((function(e){var n,a=Object.entries(null===e||void 0===e?void 0:e.items).reduce((function(e,n){var i=(0,l.Z)(n,2),r=i[0],a=i[1];return e.isFound?e:t<a.length+e.count?{page:r,index:t-e.count,isFound:!0}:{count:e.count+a.length}}),{count:0}),u=a.page,f=a.index,d=(0,r.Z)((0,i.Z)({},null===e||void 0===e?void 0:e.items),(0,o.Z)({},u,(0,s.Z)((0,Z.A)({array:null===e||void 0===e||null===(n=e.items)||void 0===n?void 0:n[u],index:f}))));return(0,r.Z)((0,i.Z)({},e),{items:d})}))},updateItem:function(e){var t=e.itemIndex,n=e.newData;j((function(e){var a,u,f,d=Object.entries(null===e||void 0===e?void 0:e.items).reduce((function(e,n){var i=(0,l.Z)(n,2),r=i[0],a=i[1];return e.isFound?e:t<a.length+e.count?{page:r,index:t-e.count,isFound:!0}:{count:e.count+a.length}}),{count:0}),c=d.page,v=d.index,g=(0,r.Z)((0,i.Z)({},null===e||void 0===e?void 0:e.items),(0,o.Z)({},c,(0,s.Z)(m({array:null===e||void 0===e||null===(a=e.items)||void 0===a?void 0:a[c],index:v,item:(0,i.Z)({},(null===e||void 0===e||null===(u=e.items)||void 0===u||null===(f=u[c])||void 0===f?void 0:f[v])||{},n)}))));return(0,r.Z)((0,i.Z)({},e),{items:g})}))},resetItems:le,page:Q,apiData:G,isAPIDataChangedRef:W})}function C(e){var t,n=e.oldData,a=n.items,u=void 0===a?P:a,l=n.data,s=n.pages,f=void 0===s?P:s,d=e.newPage,v=e.itemsKey,g=(null===d||void 0===d||null===(t=d.pager)||void 0===t?void 0:t.pagerCurrentPage)||1;return{items:(0,r.Z)((0,i.Z)({},u),(0,o.Z)({},g,(null===d||void 0===d?void 0:d[v])||[])),data:M({data:d,itemsKey:v,oldData:l}),pages:(0,r.Z)((0,i.Z)({},f),(0,o.Z)({},g,g)),fetched:!(0,c.k)(d)}}function M(e){var t=e.data,n=e.itemsKey,i=e.oldData;if(!(0,d.isObject)(t)||(0,d.isArray)(t)||(0,c.k)(t)||(0,d.isEmpty)(t))return i;t[n];return(0,u.Z)(t,[n].map(f.Z))}var I=n(66261),E=n(41370),R=n(61780),w=n(11858),x={isOpen:!1,filterKey:null,filterTitle:null,filterItem:null},K={};function k(e){var t=e.defaultActiveFilters,n=void 0===t?K:t,v=e.shouldSaveOnChange,p=e.shouldScrollOnChange,Z=void 0===p||p,m=e.disableQueryParams,P=function(e){var t,a=e.activeFilters,u=void 0===a?n:a,l=e.shallow,s=e.fragment,f=(0,d.cleanObject)((0,r.Z)((0,i.Z)({},u),(t={},(0,o.Z)(t,g.uR,u[g.uR]||X[g.uR]),(0,o.Z)(t,g.fH,X[g.fH]),(0,o.Z)(t,g.tn,void 0),t)));pe({newUrl:(0,w.m)((0,E.K)({queries:f,url:window.location.pathname}),s),scroll:Z,shallow:l})},y=function(){ee(!1)},S=function(e){var t=e.shallow;y(),P({activeFilters:G,shallow:t})},C=function(){y()},M=function(){P({activeFilters:(0,o.Z)({},g.uR,ue)}),y()},k=function(){fe(!1)},b=function(){re((0,r.Z)((0,i.Z)({},G),(0,o.Z)({},g.uR,ue))),k()},q=function(){re((0,r.Z)((0,i.Z)({},G),(0,o.Z)({},g.uR,ue))),k()},D=function(){ge(!1)},F=(0,O.useRouter)(),T=F.asPath,A=F.push,Q=F.replace,H=F.query,N=F.pathname,V=F.isReady,j=(F.events,(0,a.useState)((0,i.Z)({},n))),U=j[0],B=j[1],L=(0,a.useRef)(!1),X=(0,a.useMemo)((function(){return m?U:(0,d.getSearchParams)(T)}),[T,U]),_=(0,a.useMemo)((function(){X[g.uR],X[g.fH],X[g.tn];var e=(0,u.Z)(X,[g.uR,g.fH,g.tn].map(f.Z));return!(0,d.isEmpty)(e)}),[X]),Y=(0,a.useMemo)((function(){return Object.entries(H).reduce((function(e,t){var n=(0,l.Z)(t,2),a=n[0],u=n[1];return-1!==N.indexOf(a)?(0,r.Z)((0,i.Z)({},e),(0,o.Z)({},a,u)):(0,i.Z)({},e)}),{})}),[N,H]),z=(0,a.useState)(n),G=z[0],W=z[1],$=(0,a.useState)(!1),J=$[0],ee=$[1],te=(0,a.useState)(x),ne=te[0],ie=te[1],re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;return W((function(){return(0,d.isFunction)(e)?function(t){return(0,d.cleanObject)(e(t))}:(0,d.cleanObject)(e)}))},ae=(0,a.useMemo)((function(){return!(0,h.X)(X,G)}),[G,X]),oe=null===G||void 0===G?void 0:G[g.uR],ue=null===X||void 0===X?void 0:X[g.uR],le=(0,a.useState)(!1),se=le[0],fe=le[1],de=(0,a.useMemo)((function(){return!(0,d.isEqualString)(ue,oe)}),[oe,ue]),ce=(0,a.useState)(!1),ve=ce[0],ge=ce[1],pe=function(e){var t=e.newUrl,n=e.scroll,r=e.shallow,a=void 0===r||r,o=e.appendQuery,u=void 0!==o&&o;if(m){var l=(0,d.getSearchParams)(t);return B((0,i.Z)({},u?X:K,l)),void(n&&I.NY.scrollToTop())}L.current?(L.current=!0,n&&I.NY.scrollToTop(),A(t,void 0,{scroll:!!(null!==n&&void 0!==n?n:Z),shallow:a})):Q(t,void 0,{scroll:!!(null!==n&&void 0!==n?n:Z),shallow:a})},Ze=function(e){var t,n=e.query;pe({newUrl:(0,E.K)({queries:(t={},(0,o.Z)(t,g.fH,n),(0,o.Z)(t,g.tn,void 0),t),url:window.location.pathname}),scroll:!0})},me=function(){var e=(0,d.cleanObject)((0,i.Z)({},n||K,X));re(e)};(0,a.useEffect)((function(){me()}),[T,U]);var he=(0,a.useMemo)((function(){return(0,R.S)(T)}),[T]);return{filterExtra:ne,activeFilters:G,filterOnClick:function(e){var t=e.isAccordion,n=e.filterKey,r=e.filterItem,a=e.filterType,u=e.filterTitle,l=e.filterOptionId,f=e.filterOptionMax,p=e.filterOptionMin,Z=e.filterOptionValueMin,m=e.filterOptionValueMax,h=e.shouldSendDataToServer,O=e.shallow;if(t)ie((function(e){var t=e.isOpen,i=e.filterKey;return{isOpen:!(t&&(0,d.isEqualString)(n,i)),filterTitle:u,filterKey:n,filterItem:r}}));else{var y=function(e){var t,n=e.filterKey,r=e.filterType,a=e.activeFilters,u=e.filterOptionId,l=e.filterOptionMin,f=e.filterOptionMax,v=e.filterOptionValueMin,p=e.filterOptionValueMax,Z=(0,d.isObject)(n),m=Z?n.keyId:n,h=null===n||void 0===n?void 0:n.keyCode,O=(null===a||void 0===a?void 0:a[h])||K,P=Z?null===(t=a[h])||void 0===t?void 0:t[m]:a[n];if((0,d.isEqualString)(g.kQ.CHECKBOX,r)){var y=function(e){var t,n=e.filterOptionId,i=e.filterItem,r=e.filterKey;if(null===i||void 0===i||null===(t=i.find)||void 0===t?void 0:t.call(i,(function(e){return(0,d.isEqualString)(e,n)}))){var a,u=null===i||void 0===i||null===(a=i.filter)||void 0===a?void 0:a.call(i,(function(e){return!(0,d.isEqualString)(e,n)}));return(0,o.Z)({},r,(0,d.isEmpty)(u)?void 0:u)}return(0,o.Z)({},r,(0,s.Z)(i||[]).concat([n]))}({filterItem:P,filterKey:m,filterOptionId:u});return(0,i.Z)({},a||K,Z?(0,o.Z)({},h,(0,i.Z)({},O,y)):y)}if([g.kQ.RADIO,g.kQ.BUTTON].includes(r)){var S=function(e){var t=e.filterKey,n=e.filterOptionId;return(0,o.Z)({},t,n)}({filterItem:P,filterKey:n,filterOptionId:u});return(0,i.Z)({},a||K,Z?(0,o.Z)({},h,(0,i.Z)({},O,S)):S)}if((0,d.isEqualString)(g.kQ.SLIDER,r)){var C=function(e){var t,n=e.filterOptionMin,i=e.filterOptionMax,r=e.filterOptionValueMin,a=e.filterOptionValueMax,u=e.filterKey,l=(0,d.isEqualString)(i,a)&&(0,d.isEqualString)(n,r);return(0,o.Z)({},u,l?void 0:(t={},(0,o.Z)(t,g.LS,r),(0,o.Z)(t,g.o$,a),t))}({filterKey:n,filterOptionMax:f,filterOptionMin:l,filterOptionValueMin:v,filterOptionValueMax:p});return(0,i.Z)({},a||K,Z?(0,o.Z)({},h,(0,i.Z)({},O,C)):C)}if([g.kQ.BOOLEAN,g.kQ.SWITCH].includes(r)){var M=function(e){var t=e.filterItem,n=e.filterKey,i=e.filterOptionId;return(0,o.Z)({},n,(0,c.k)(t)?i:void 0)}({filterItem:P,filterKey:n,filterOptionId:u});return(0,i.Z)({},a||K,Z?(0,o.Z)({},h,(0,i.Z)({},O,M)):M)}if((0,d.isEqualString)(g.kQ.CATEGORY_LIST,r)){var I=function(e){var t=e.filterKey,n=e.filterOptionId;return(0,o.Z)({},t,(0,c.k)(n)?void 0:[n])}({filterKey:n,filterOptionId:u});return(0,i.Z)({},a||K,Z?(0,o.Z)({},h,(0,i.Z)({},O,I)):I)}return(0,i.Z)({},a||K)}({filterKey:n,filterType:a,filterOptionId:l,filterOptionMin:p,filterOptionMax:f,filterOptionValueMin:Z,filterOptionValueMax:m,activeFilters:G});h||v?P({activeFilters:y,shallow:O}):re(y)}},filterClear:M,filterIsModalOpen:J,filterOpenModal:function(){ee(!0)},filterCloseModal:y,filterSaveChanges:S,filterCancelChanges:C,filterHasChanged:ae,activeSortId:oe,submittedSortId:ue,sortOnClick:function(e){var t=e.sortOptionId;e.shouldSendDataToServer||v?(P({activeFilters:(0,r.Z)((0,i.Z)({},G),(0,o.Z)({},g.uR,t))}),k()):re((0,r.Z)((0,i.Z)({},G),(0,o.Z)({},g.uR,t)))},sortIsModalOpen:se,sortOpenModal:function(){fe(!0)},sortCloseModal:k,sortSaveChanges:b,sortCancelChanges:q,sortHasChanged:de,allIsModalOpen:ve,allOpenModal:function(){ge(!0)},allCloseModal:D,allSaveChanges:function(){b(),S(),D()},allCancelChanges:function(){q(),C(),D()},allClear:function(){M(),q(),D()},onSearch:Ze,onPageChange:function(e){pe({newUrl:(0,E.K)({queries:(0,o.Z)({},g.tn,e),url:window.location.href}),scroll:Z,appendQuery:!0})},searchOnClearParam:function(){Ze(K)},searchParam:X[g.fH],queryParams:X,reinitializeQueryParams:function(){me()},urlParams:Y,isReady:V,hasFilter:_,fragment:he,changeFragment:function(e){P({fragment:e,activeFilters:G})}}}function b(e){var t=e.apiMethod,n=e.apiData,o=e.disabled,u=e.onSuccess,l=e.onError,s=e.itemsKey,f=e.isPagination,c=e.defaultActiveFilters,v=void 0===c?{}:c,g=e.defaultActiveSort,p=void 0===g?null:g,Z=e.shouldSaveOnChange,m=e.ssrData,h=e.shouldScrollOnChange,O=e.disableQueryParams,P=e.getSSRMethods,y=e.notHandledByUseSSR,C=k({defaultActiveFilters:v,defaultActiveSort:p,shouldSaveOnChange:Z,shouldScrollOnChange:h,disableQueryParams:O,isPagination:f}),M=(0,a.useMemo)((function(){var e;return P?null===P||void 0===P||null===(e=P({query:C.urlParams||{}}))||void 0===e?void 0:e[0]:{apiMethod:t,apiData:n}}),[C.isReady,C.urlParams,n]),I=y||!!t,E=S((0,r.Z)((0,i.Z)({},M),{queryParams:C.queryParams,disabled:o,notHandledByUseSSR:I,onSuccess:u,onError:l,onPageChange:C.onPageChange,itemsKey:s,isPagination:f,ssrData:(0,d.isArray)(m)?null===m||void 0===m?void 0:m[0]:m}));return(0,i.Z)({},E,C)}},69658:function(e,t,n){n.d(t,{A:function(){return a}});var i=n(29815),r=n(73286);function a(e){var t=e.array,n=void 0===t?[]:t,a=e.index;return(0,r.isArray)(n)?(0,i.Z)(n.filter((function(e,t){return a!==t}))):[]}}}]);
